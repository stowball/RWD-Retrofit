/*
 * RWD Retrofit v1.3
 * Allows an existing "desktop site" to co-exist with a "responsive site", while also able to serve the desktop site to a different breakpoint on "mobile" - useful for serving the desktop site to tablets, for example
 *
 * Returns an object containing the desktop (rwdRetrofit.desktop) and optional mobile (rwdRetrofit.mobile) media queries as strings for responding to media queries with JS; for example, by using enquire.js (http://wickynilliams.github.com/enquire.js)
 *
 * Requires: cssua.js (http://cssuseragent.org)
 *
 * Usage:
 * 1. Set up the viewport with: <meta name="viewport" content="width=device-width, initial-scale=1" />
 * 2. Reference the existing desktop stylesheet with a <link> with a relevant media query, eg. media="all and (min-width: 990px)" and class="rwdretro-desktop"
 * 3. Reference the new responsive stylesheet with a <link> with a relevant media query, eg. media="all and (max-width: 989px)" and class="rwdretro-mobile"
 * 4. Add an optional data-breakpoint-width="xxx" attribute to the desktop stylesheet <link>, where xxx is the pixel width that the desktop breakpoint will occur on mobile devices - eg. 768 for iPads and other large tablets
 * 5. Add an optional data-viewport-width="xxx" attribute to the desktop stylesheet <link>, where xxx is the pixel width that the desktop viewport will be set to on mobile devices
 * 6. Include cssua.js before rwd.retrofit.min.js
 *
 * Copyright (c) 2012 Izilla Partners Pty Ltd
 *
 * http://www.izilla.com.au
 *
 * Licensed under the MIT license
 */
;var rwdRetrofit=(function(){if(!document.querySelector||!document.getElementsByClassName||typeof(document.documentElement.clientWidth)=="undefined"){return}var h=document.querySelector('meta[name="viewport"]'),q=document.getElementsByClassName("rwdretro-desktop"),b=document.getElementsByClassName("rwdretro-mobile");if(!h||q.length===0||b.length===0){return}var l="content",e="media",d=h&&h.getAttribute(l),f="width=980",a=250,c="onorientationchange" in window,k=c?"orientationchange":"resize",o=q[0].getAttribute(e),r=b[0].getAttribute(e),j=q[0].getAttribute("data-breakpoint-width"),p,m=q[0].getAttribute("data-viewport-width"),s={};if(cssua.ua.mobile){if(j){p=j}else{p=o.replace(/.*?min-width:\s?(\d*).*/g,"$1")}if(m&&parseInt(m)>=parseInt(p)){f=f.replace(/\d+/,m)}else{if(p>980){f=f.replace(/\d+/,p)}}}else{p=o.replace(/.*?min-width:\s?(\d*).*/g,"$1")}o=o.replace(/(min-width:\s?)\d*/g,"$1"+p);r=r.replace(/(max-width:\s?)\d*/g,"$1"+(p-1));s.desktop=o,s.mobile=r;if(cssua.ua.mobile){for(var n=0;n<q.length;n++){q[n].setAttribute(e,o)}for(var n=0;n<b.length;n++){b[n].setAttribute(e,r)}if(cssua.ua.ios){a=0}function g(){h.setAttribute(l,d);window.setTimeout(function(){if(document.documentElement.clientWidth>=p){h.setAttribute(l,f)}},a)}g();window.addEventListener(k,g,false)}return s})();