/*
 * RWD Retrofit v1.0
 * Allows an existing "desktop site" to co-exist with a "responsive site", while also able to serve the desktop site to a different breakpoint on "mobile" - useful for serving the desktop site to tablets, for example
 *
 * Returns an object containing the desktop (rwdRetrofit.desktop) and optional mobile (rwdRetrofit.mobile) media queries as strings for responding to media queries with JS; for example, by using enquire.js (http://wickynilliams.github.com/enquire.js)
 *
 * Requires: cssua.js (http://cssuseragent.org)
 *
 * Usage:
 * 1. Set up the viewport with: <meta name="viewport" content="width=device-width" />
 * 2. Reference the existing desktop stylesheet with a <link> with a relevant media query, eg. media="all and (min-width: 990px)" and class="rwdretro-desktop"
 * 3. Reference the new responsive stylesheet with a <link> with a relevant media query, eg. media="all and (max-width: 989px)" and class="rwdretro-mobile"
 * 4. Add an optional data-mobile-breakpoint="xxx" attribute to the responsive stylesheet <link>, where xxx is the pixel-width that the desktop breakpoint will occur on mobile devices - eg. 768 for iPads and other large tablets
 * 5. Include cssua.js before rwd.retrofit.min.js
 *
 * Copyright (c) 2012 Izilla Partners Pty Ltd
 *
 * http://www.izilla.com.au
 *
 * Licensed under the MIT license
 */
var rwdRetrofit=(function(){if(!document.querySelector||!document.getElementsByClassName||typeof(document.documentElement.clientWidth)=="undefined"){return}var r=document.querySelector('meta[name="viewport"]');if(!r){return}var p="content",k="media",a=r&&r.getAttribute(p),o="width=980",l=250,b="onorientationchange" in window,q=b?"orientationchange":"resize",t=document.getElementsByClassName("rwdretro-desktop"),d=document.getElementsByClassName("rwdretro-mobile"),j=t[0].getAttribute(k),s=d[0].getAttribute(k),f=d[0].getAttribute("data-mobile-breakpoint"),h,g={};if(cssua.ua.mobile&&f){h=f}else{h=j.replace(/.*?min-width:\s?(\d*).*/g,"$1")}j=j.replace(/(min-width:\s?)\d*/g,"$1"+h);s=s.replace(/(max-width:\s?)\d*/g,"$1"+(h-1));g.desktop=j,g.mobile=s;if(cssua.ua.mobile&&f){for(var n=0;n<t.length;n++){t[n].setAttribute(k,j)}for(var n=0;n<d.length;n++){d[n].setAttribute(k,s)}if(cssua.ua.ios){l=0}function e(){r.setAttribute(p,a);window.setTimeout(function(){if(document.documentElement.clientWidth>=h){r.setAttribute(p,o)}},l)}e();window.addEventListener(q,e,false)}return g})();